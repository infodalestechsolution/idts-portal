<!DOCTYPE html>
<html lang="en">

<head>
    <title>Blogs | Content as a Service in AEM</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Content as a Service in AEM is a powerful feature of AEM that circulates content in structured format like JSON instead of serving it as mere webpages thus aiding in its usage across multiple platforms including mobile apps, IoT devices. This content can be consumed by various other websites, applications, and devices.">
    <meta name="keywords" content="infodales, content fragments, export, graphql, api, RESTful api">
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Blogs | Content as a Service in AEM" />
    <meta property="og:description"
        content=" Content as a Service in AEM is a powerful feature of AEM that circulates content in structured format like JSON instead of serving it as mere webpages thus aiding in its usage across multiple platforms including mobile apps, IoT devices. This content can be consumed by various other websites, applications, and devices." />
    <meta property="og:url" content="https://infodales.com/spa-getting-started.html" />
    <meta property="og:site_name" content="Blogs | Content as a Service in AEM" />
    <link rel="stylesheet" href="/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;300;400;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

</head>

<body>

    <!-- Header -->
    <section class="sub-header"
        style="background-image: linear-gradient(rgba(4, 9, 30, 0.5), rgba(4, 9, 30, 0.5)), url('/images/Cover\ Sites.jpg');">
        <nav>
            <a href="/index.html"><img src="/images/infodales/Info Dales Main Logo 03.webp" alt="logo"></a>
            <div class="nav-links" id="navLinks">
                <i class="fa fa-times" onclick="hideMenu()"></i>
                <ul>
                    <li><a href="/index.html">HOME</a></li>
                    <li><a href="/about.html">ABOUT</a></li>
                    <li><a href="/services.html">SERVICES</a></li>
                    <li><a href="/blogs.html">BLOGS</a></li>
                    <li><a href="/career.html">CAREER</a></li>
                    <li><a href="/contact.html">CONTACT</a></li>
                    <ul>
            </div>
            <i class="fa fa-bars" onclick="showMenu()"></i>
        </nav>

    </section>
    <!--  Blog Page Content --->
    <section class="blog-content">
        <div>
            <div class="blog spa-blog">

                <p style="color: rgb(133, 133, 133); padding: 0 0 10px 0;"><a href="/blogs.html"
                        style="text-decoration: none; cursor: pointer;">Blogs</a> <span> > </span>Content as a Service
                    in AEM</p>

                <p class="sitesTag" style="margin-top: 7px; margin-bottom: 7px; font-size: 13px; border-radius: 20px; 
				width: fit-content; padding: 3px 15px;">AEM Sites</p>
                <h1 class="title">Content as a Service in AEM</h1>
                <span class="author">Infodales Tech Solutions</span> |
                <span class="date">November 12, 2024</span>

                <div class="share-icons">
                    <a href="https://www.linkedin.com/company/infodales-tech-solution/" target="_blank"
                        class="linkedin-icon"><i class="fa fa-linkedin"></i></a>
                    <a href="mailto:info@infodales.com" target="_blank" class="email-icon"><i
                            class="fa fa-envelope"></i></a>
                </div>

                <hr style="margin: 20px 0 10px 0;">
                <div class="blog-items">


                    <p>Hi, hope you are doing well. Welcome to another blog.</p>
                    <h3 style="text-align: left; margin: 0px 0">Content as a Service in AEM</h3>
                    <p>
                        Content as a Service in AEM is a powerful feature of AEM that circulates content in structured
                        format like JSON instead of serving it as mear webpages thus aiding in its usage across multiple
                        platforms including mobile apps, IoT devices. This content can be consumed by various other
                        websites, applications, and devices.
                    </p>
                    <h3 style="text-align: left; margin: 0px 0">Features of Content as a Service in AEM</h3>

                    <p>
                        Content as a Service thus provides a variety of powerful features that include:
                    </p>
                    <ul class="ff_ul">
                        <li>
                            <p>
                                <b>Headless Content Delivery</b> : Headless content delivery in AEM is like having a
                                supercharged content hub that feeds all your digital experiencesâ€”websites, mobile apps,
                                kiosks, or even smart devicesâ€”without being tied to a specific front-end design.
                            </p>
                            <p>
                                Think of AEM as the brain of your content. It stores and manages everythingâ€”text,
                                images, videos, structured dataâ€”and makes it available through APIs. These APIs act like
                                messengers, delivering content to any front-end framework you choose, whether itâ€™s
                                React, Angular, Vue.js, or even something new in the future.
                            </p>
                            <p>
                                This setup gives developers the freedom to build fast, modern, and interactive
                                applications while letting content creators work in AEM without worrying about code.
                                Itâ€™s a flexible, scalable way to keep content consistent across platforms, ensuring that
                                updates happen in one place but appear everywhere your audience interacts with your
                                brand.
                            </p>

                        </li>
                        <li>
                            <p>
                                <b>Content Fragments</b> in AEM are like neatly organized content blocks that you can
                                create once and reuse across multiple platforms. They help structure content in a way
                                thatâ€™s flexible, consistent, and API-friendly, making them perfect for headless content
                                delivery. Once created, these fragments can be referenced anywhere within AEM pages, or
                                they can be delivered directly to websites, mobile apps, or other digital platforms
                                through APIs. For more details on content fragments, refer <a
                                    href="https://infodales.com/blogs/ContentFragments.html">our blog on content
                                    fragments</a>.
                            </p>

                        </li>
                        <li>
                            <p>
                                <b>GraphQL & REST APIs</b> : If you're familiar with GraphQL, you'll love AEMâ€™s
                                implementation. Instead of making multiple requests to retrieve different pieces of
                                content, GraphQL lets you ask for exactly what you need in a single request. This makes
                                content delivery faster and more efficient, reducing unnecessary data transfers. Itâ€™s
                                perfect for structured content like product catalogs, blogs, FAQs, and content
                                fragments, where you only want specific fields rather than an entire data set. For more
                                details refer our <a href="https://infodales.com/blogs/aem-graphql.html">Graphql</a>
                                blog where the content fragments are actualy exported using GraphQL
                            </p>
                            <p>
                                AEM content Services also supports REST APIs, provides a flexible way to fetch content
                                in JSON format. It follows a more traditional API structure, where each request
                                retrieves predefined content endpoints. This is useful when you need to integrate AEM
                                with other systems or when working with applications that rely on RESTful architecture.
                            </p>
                        </li>

                    </ul>
                    <p>
                        Here we will be creating a few content fragments which store data of stars. This data will be
                        then exported as a JSON RESTful API endpoint.
                    </p>
                    <h3 style="text-align: left; margin: 0px 0">Creation of Content Fragment Model and respective
                        Content Fragments.</h3>
                    <p>
                        To begin with, we need to have a few content fragments that stores the data of stars. We will be
                        creating a content fragment model and proceed with adding content fragments.
                    </p>
                    <ul class="ff_ul">
                        <li>
                            <p>
                                Navigate to tools and then to assets and then to content fragments. Here you can see a
                                few folders. Go to your project folder and then create a content Fragment model.
                            </p>
                            <div class="image-container">
                                <image class="center smallscreenfull" style="width: 100%;"
                                    src="../images/contentasaservice/cfmodel.webp" />
                            </div>
                            <br />
                            <div class="image-container">
                                <image class="center" style="width: 100%;"
                                    src="../images/contentasaservice/createcfmodel.webp" />
                            </div>
                            <br />
                            <div class="image-container">
                                <image class="center smallscreenfull" style="width: 30%;"
                                    src="../images/contentasaservice/createcf1.webp" />
                            </div>
                            <br />
                            <div class="image-container">
                                <image class="center" style="width: 100%;"
                                    src="../images/contentasaservice/completecfmodel.webp" />
                            </div>
                        </li>
                        <li>
                            <p>
                                Having created the content fragment model, we need to create a few content fragments. To
                                do so, navigate to navigations, assets and then files. Now create a folder, here we have
                                created Stars Data folder.
                            </p>
                            <div class="image-container">
                                <image class="center" style="width: 100%;"
                                    src="../images/contentasaservice/assets.webp" />
                            </div>
                            <br />
                            <div class="image-container">
                                <image class="center" style="width: 100%;"
                                    src="../images/contentasaservice/starsfolder.webp" />
                            </div>
                        </li>
                        <li>
                            <p>
                                Within this folder will reside all the content fragments. To do so, we need to add the
                                folder where in there exists our content fragment model in the cloud configurations of
                                the stars data folder. Select the folder and go to properties and in cloud
                                configurations, add the path of the folder in which we have the content fragment model.
                            </p>
                            <div class="image-container">
                                <image class="center" style="width: 100%;"
                                    src="../images/contentasaservice/properties1.webp" />
                            </div>
                            <br />
                            <div class="image-container">
                                <image class="center" style="width: 100%;"
                                    src="../images/contentasaservice/properties2.webp" />
                            </div>
                            <br />
                            <div class="image-container">
                                <image class="center" style="width: 100%;"
                                    src="../images/contentasaservice/cloudconfigurations.webp" />
                            </div>
                        </li>
                        <li>
                            <p>
                                Having done so, we have created a few content fragmengs which are now ready to be
                                exported.
                            </p>
                            <div class="image-container">
                                <image class="center" style="width: 100%;"
                                    src="../images/contentasaservice/allcf.webp" />
                            </div>
                        </li>

                    </ul>
                    <h3 style="text-align: left; margin: 0px 0">Endpoint Creation</h3>
                    <p>
                        Now we have all the prerequisits ready for the creation of an endpoint which will sore the data
                        of the content fragments. Here is the code snippet for the same which we will be understanding.
                    </p>
                    <div>
                        <pre style="width: 100%; height:100%">
                        <code class="center code-flow" style="width: 100%; height:100%">
        package com.local.core.constants;

        public class StarEndpointConstant {
            public static final String ENDPOINTPATH = "/bin/stars";
            public static final String STAR_PARENT_FOLDER_PATH = "/content/dam/stars-data";
            public static final String STAR_MASTER = "/jcr:content/data/master";
            public static final String STAR_NAME = "starName";
            public static final String DATEOFDISCOVERY = "discoveryDate";
            public static final String SPECTRALINFO = "spectralType";
            public static final String SPECTRUM = "spectrum";
            public static final String SOLAR_MASS = "solarMass";
            public static final String IS_PART_OF_BINARY_STAR_SYSTEM = "isPartOfBinaryStarSystem";
            public static final String PART_OF_BINARY_STAR_SYSTEM = "Part of Binary Star System";
            public static final String DISCOVERY = "discovery";
        }

                        </code>
                    </pre>
                    </div>

                    <div>
                        <pre style="width: 100%; height:100%">
                        <code class="center code-flow" style="width: 100%; height:100%">
            package com.local.core.servlets;

            import com.local.core.constants.StarEndpointConstant;
            import org.apache.sling.api.SlingHttpServletRequest;
            import org.apache.sling.api.SlingHttpServletResponse;
            import org.apache.sling.api.resource.Resource;
            import org.apache.sling.api.resource.ResourceResolver;
            import org.apache.sling.api.servlets.SlingSafeMethodsServlet;
            import org.json.JSONException;
            import org.json.JSONObject;
            import org.osgi.service.component.annotations.Component;
            import javax.jcr.*;
            import javax.servlet.Servlet;
            import javax.servlet.ServletException;
            import java.io.IOException;
            import java.io.PrintWriter;
            import java.util.ArrayList;
            import java.util.Calendar;
            import java.util.List;

            @Component(service = {Servlet.class}, property = {
                    "sling.servlet.paths="+ StarEndpointConstant.ENDPOINTPATH,
                    "sling.servlet.methods=GET"
            })
            public class StarsServlet extends SlingSafeMethodsServlet {

                private String discoveryDate;
                private List<String> spectral;
                private String solarMass;
                private String isPartOfBinaryStarSystem;

                @Override
                protected void doGet(SlingHttpServletRequest request, SlingHttpServletResponse response) throws ServletException, IOException {
                    PrintWriter out = response.getWriter();
                    ResourceResolver resolver = request.getResourceResolver();
                    Resource resource= resolver.getResource(StarEndpointConstant.STAR_PARENT_FOLDER_PATH);
                    Node starData = resource.adaptTo(Node.class);
                    try {
                        JSONObject starJSONObject = new JSONObject();
                        NodeIterator stars = starData.getNodes();
                        while(stars.hasNext()){
                            Node star =  stars.nextNode();
                            String name = star.getName();
                            if(!name.contains(":")){
                                Node starMaster = resolver.getResource(star.getPath()+ StarEndpointConstant.STAR_MASTER).adaptTo(Node.class);
                                String starName = starMaster.getProperty(StarEndpointConstant.STAR_NAME).getValue().getString();
                                JSONObject starDataJsonObject = new JSONObject();
                                JSONObject starSpectrumJsonObject = new JSONObject();
                                if(starMaster.hasProperty(StarEndpointConstant.DATEOFDISCOVERY)){
                                    Calendar calendar = starMaster.getProperty(StarEndpointConstant.DATEOFDISCOVERY).getValue().getDate();
                                    int year = calendar.get(calendar.YEAR);
                                    int month = calendar.get(calendar.MONTH);
                                    int day = calendar.get(calendar.DAY_OF_MONTH);
                                    discoveryDate = year + "-" + month + "-" + day;
                                    starDataJsonObject.put(StarEndpointConstant.DISCOVERY, discoveryDate);
                                }
                                if(starMaster.hasProperty(StarEndpointConstant.SPECTRALINFO)){
                                    spectral = new ArrayList<>();
                                    Value[] spectralProperties = starMaster.getProperty(StarEndpointConstant.SPECTRALINFO).getValues();
                                    for(Value spectralProperty : spectralProperties) {
                                        spectral.add(spectralProperty.toString());
                                    }
                                    for(String spectrum : spectral){
                                        starSpectrumJsonObject.put(spectrum.split(":")[0], spectrum.split(":")[1]);
                                    }
                                    starDataJsonObject.put(StarEndpointConstant.SPECTRUM,starSpectrumJsonObject);
                                }
                                if(starMaster.hasProperty(StarEndpointConstant.SOLAR_MASS)){
                                    solarMass = starMaster.getProperty(StarEndpointConstant.SOLAR_MASS).getValue().toString();
                                    starDataJsonObject.put(StarEndpointConstant.SOLAR_MASS, solarMass);
                                }
                                if(starMaster.hasProperty(StarEndpointConstant.IS_PART_OF_BINARY_STAR_SYSTEM)){
                                    if(starMaster.getProperty(StarEndpointConstant.IS_PART_OF_BINARY_STAR_SYSTEM).getBoolean()){
                                        starDataJsonObject.put(StarEndpointConstant.PART_OF_BINARY_STAR_SYSTEM, "YES");
                                    }else{
                                        starDataJsonObject.put(StarEndpointConstant.PART_OF_BINARY_STAR_SYSTEM, "YES");
                                    }
                                }
                                starJSONObject.put(starName, starDataJsonObject);
                            }
                        }
                        out.println(starJSONObject);
                    } catch (RepositoryException e) {
                        throw new RuntimeException(e);
                    } catch (IllegalArgumentException illegalArgumentException) {
                        illegalArgumentException.printStackTrace();
                    } catch (JSONException jsonException){
                        jsonException.printStackTrace();
                    }
                }

            }


                        </code>
                    </pre>
                    </div>
                    <p>
                        Now let us step by step understand what does this code tries to do.
                    </p>
                    <ul class="ff_ul">
                        <li>
                            <p>
                                We have created a servlet which is registered by path and we expect to recieve a json
                                response from this servlet when this path is hit.
                            </p>
                            <div>
                                <pre style="width: 100%; height:100%">
                                <code class="center code-flow" style="width: 100%; height:100%">
            @Component(service = {Servlet.class}, property = {
            "sling.servlet.paths="+ StarEndpointConstant.ENDPOINTPATH,
            "sling.servlet.methods=GET"
        })
                                </code>
                            </pre>
                            </div>
                        </li>
                        <li>
                            <p>
                                We are mapping all the properties defined in the content fragments (star name, date of
                                discovery, spectral, is part of binary star system and solar mass).
                            </p>
                            <div class="image-container">
                                <image class="center" style="width: 100%;"
                                    src="../images/contentasaservice/alpha-centuri-a.webp" />
                            </div>
                        </li>
                        <li>
                            <p>
                                starSpectrumJsonObject puts all the spectal data. This is a multi field property, and so
                                the spectral property value is first added in a List of String and then is added in
                                starSpectrumJsonObject with key as substring before ":" and value as after ":". Having
                                collected this data, it is then added in starDataJsonObject.
                            </p>
                            <div>
                                <pre style="width: 100%; height:100%">
                                <code class="center code-flow" style="width: 100%; height:100%">
            if(starMaster.hasProperty(StarEndpointConstant.SPECTRALINFO)){
                spectral = new ArrayList<>();
                Value[] spectralProperties = starMaster.getProperty(StarEndpointConstant.SPECTRALINFO).getValues();
                for(Value spectralProperty : spectralProperties) {
                    spectral.add(spectralProperty.toString());
                }
                for(String spectrum : spectral){
                     starSpectrumJsonObject.put(spectrum.split(":")[0], spectrum.split(":")[1]);
                }
                starDataJsonObject.put(StarEndpointConstant.SPECTRUM,starSpectrumJsonObject);
            }
                                </code>
                            </pre>
                            </div>
                        </li>
                        <li>
                            <p>
                                Discovery date is a date object added. This date object extracted using calendar object
                                and constants.
                            </p>
                            <div>
                                <pre style="width: 100%; height:100%">
                                <code class="center code-flow" style="width: 100%; height:100%">
            if(starMaster.hasProperty(StarEndpointConstant.DATEOFDISCOVERY)){
                Calendar calendar = starMaster.getProperty(StarEndpointConstant.DATEOFDISCOVERY).getValue().getDate();
                int year = calendar.get(calendar.YEAR);
                int month = calendar.get(calendar.MONTH);
                int day = calendar.get(calendar.DAY_OF_MONTH);
                    discoveryDate = year + "-" + month + "-" + day;
                starDataJsonObject.put(StarEndpointConstant.DISCOVERY, discoveryDate);
            }
                                </code>
                            </pre>
                            </div>
                        </li>
                        <li>
                            <p>
                                This is then added in the starJSONObject and this is provided in the response of the
                                code.
                            </p>
                            <div class="image-container">
                                <image class="center" style="width: 100%;"
                                    src="../images/contentasaservice/response.webp" />
                            </div>
                        </li>
                    </ul>

                    <h3 style="text-align: left; margin: 0px 0">Conclusion</h3>
                    <p>
                        We have now understood how content fragments are exported as a JSON RESTful API endpoint. This
                        created response is now ready to be consumed by any other application.
                    </p>
                    <p>
                        I hope you enjoyed the learing and have found the blog informative.
                    </p>
                </div>
                <hr style="margin-top: 30px;" />
                <div class="author-details">
                    <div id="like-icon" class="like-icon">
                        <span id="like-count" class="like-count">0</span>
                        <span id="like-btn" class="like-btn">
                            <img src="/images/clap.webp" alt="Like">
                        </span>
                    </div>
                    <div>
                        <span class="author-name">Shruti Meshram | </span>
                        <span class="author-designation">AEM Developer</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="social-icons">

        <a href="https://www.linkedin.com/company/infodales-tech-solution/" class="linkedin"><img
                src="/images/linkedin.webp" alt="LinkedIn"></a>
        <a href="mailto:info@infodales.com" class="email"><img src="/images/email.webp" alt="Email"></a>
    </div>

    <!--  Footer --->
    <div class="copyright-area">
        <div class="footer">
            <div class="row" style="margin-top: 0px;">
                <div class="col-xl-4 col-lg-4 text-center text-lg-left">
                    <div class="copyright-text">
                        <p>Copyright &copy; 2024, All Right Reserved <a href="/index.html">Infodales Tech
                                Solution</a></p>
                    </div>
                </div>

                <div class="col-xl-4 col-lg-4 d-none d-lg-block text-right">
                    <div class="footer-menu" style="margin-top:10px;">
                        <ul>
                            <li><a href="/index.html">Home</a></li>
                            <li><a href="/about.html">About</a></li>
                            <li><a href="/contact.html">Contact</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!--- Java Script-->
    <script>
        var navLinks = document.getElementById("navLinks");

        function showMenu() {
            navLinks.style.right = "0";
        }

        function hideMenu() {
            navLinks.style.right = "-200px";
        }

        document.addEventListener("DOMContentLoaded", () => {
            const likeBtn = document.getElementById('like-btn');
            const likeCount = document.getElementById('like-count');

            let count = parseInt(localStorage.getItem('clapCount')) || 0;
            likeCount.textContent = count;

            likeBtn.addEventListener('click', () => {
                count++;
                likeCount.textContent = count;
                localStorage.setItem('clapCount', count);

                const likeAnimation = document.createElement('div');
                likeAnimation.classList.add('like-animation');
                likeAnimation.innerHTML = 'ðŸŽ‰';
                document.getElementById('like-icon').appendChild(likeAnimation);
                likeAnimation.addEventListener('animationend', () => {
                    likeAnimation.remove();
                });
            });
        });



    </script>

</body>

</html>